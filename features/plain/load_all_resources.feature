@paginate

Feature: Populate warehouse
  Scenario Outline: Connect to sequencescape and get resource data from 2 pages and save to database
    Given the "<resource>" resource exists
      And all of this is happening at exactly "14-Mar-2011 10:00:00+00:00"
    When I connect to the "<resource>" resource and save the data
    Then I should be able to find UUID "<uuid>" in "<resource>" the warehouse
      And UUID "<uuid>" in "<resource>" should have an inserted at time of "14-Mar-2011 10:00:00+00:00"
    Examples:
      | resource               | uuid                                 |
      | Tag                    | 11111111-1111-1111-1111-111111111111 |
      | Tag                    | 11111111-1111-1111-1111-111111111113 |
      | Study                  | 11111111-1111-1111-1111-111111111111 |
      | Study                  | 11111111-1111-1111-1111-111111111113 |
      | AssetLink              | 11111111-1111-1111-1111-111111111111 |
      | AssetLink              | 11111111-1111-1111-1111-111111111113 |
      | Batch                  | 11111111-1111-1111-1111-111111111111 |
      | Batch                  | 11111111-1111-1111-1111-111111111113 |
      | BatchRequest           | 11111111-1111-1111-1111-111111111111 |
      | BatchRequest           | 11111111-1111-1111-1111-111111111113 |
      | Event                  | 11111111-1111-1111-1111-111111111111 |
      | Event                  | 11111111-1111-1111-1111-111111111113 |
      | Lane                   | 11111111-1111-1111-1111-111111111111 |
      | Lane                   | 11111111-1111-1111-1111-111111111113 |
      | Plate                  | 11111111-1111-1111-1111-111111111111 |
      | Plate                  | 11111111-1111-1111-1111-111111111113 |
      | Well                   | 11111111-1111-1111-1111-111111111111 |
      | Well                   | 11111111-1111-1111-1111-111111111113 |
      | Project                | 11111111-1111-1111-1111-111111111111 |
      | Project                | 11111111-1111-1111-1111-111111111113 |
      | Request                | 11111111-1111-1111-1111-111111111111 |
      | Request                | 11111111-1111-1111-1111-111111111113 |
      | Sample                 | 11111111-1111-1111-1111-111111111111 |
      | Sample                 | 11111111-1111-1111-1111-111111111113 |
      | StudySample            | 11111111-1111-1111-1111-111111111111 |
      | StudySample            | 11111111-1111-1111-1111-111111111113 |
      | TagInstance            | 11111111-1111-1111-1111-111111111111 |
      | TagInstance            | 11111111-1111-1111-1111-111111111113 |
      | LibraryTube            | 11111111-1111-1111-1111-111111111111 |
      | LibraryTube            | 11111111-1111-1111-1111-111111111113 |
      | MultiplexedLibraryTube | 11111111-1111-1111-1111-111111111111 |
      | MultiplexedLibraryTube | 11111111-1111-1111-1111-111111111113 |
      | SampleTube             | 11111111-1111-1111-1111-111111111111 |
      | SampleTube             | 11111111-1111-1111-1111-111111111113 |
      | Quota                  | 11111111-1111-1111-1111-111111111111 |
      | Quota                  | 11111111-1111-1111-1111-111111111113 |
      | BillingEvent           | 11111111-1111-1111-1111-111111111111 |
      | BillingEvent           | 11111111-1111-1111-1111-111111111113 |
	    | PlatePurpose           | 11111111-1111-1111-1111-111111111111 |
	    | PlatePurpose           | 11111111-1111-1111-1111-111111111112 |
     
  @delayed_job
  Scenario Outline: Connect to sequencescape and get resource data from 2 pages, in groups of 1 with delayed job
    Given the "<resource>" resource exists
      And all of this is happening at exactly "14-Mar-2011 10:00:00+00:00"
    When I create 2 delayed jobs for "<resource>"
    Given all pending delayed jobs are processed
    Then I should be able to find UUID "<uuid>" in "<resource>" the warehouse
      And UUID "<uuid>" in "<resource>" should have an inserted at time of "14-Mar-2011 10:00:00+00:00"
    Examples:
      | resource               | uuid                                 |
      | Tag                    | 11111111-1111-1111-1111-111111111111 |
      | Tag                    | 11111111-1111-1111-1111-111111111113 |
      | Study                  | 11111111-1111-1111-1111-111111111111 |
      | Study                  | 11111111-1111-1111-1111-111111111113 |
      | AssetLink              | 11111111-1111-1111-1111-111111111111 |
      | AssetLink              | 11111111-1111-1111-1111-111111111113 |
      | Batch                  | 11111111-1111-1111-1111-111111111111 |
      | Batch                  | 11111111-1111-1111-1111-111111111113 |
      | BatchRequest           | 11111111-1111-1111-1111-111111111111 |
      | BatchRequest           | 11111111-1111-1111-1111-111111111113 |
      | Event                  | 11111111-1111-1111-1111-111111111111 |
      | Event                  | 11111111-1111-1111-1111-111111111113 |
      | Lane                   | 11111111-1111-1111-1111-111111111111 |
      | Lane                   | 11111111-1111-1111-1111-111111111113 |
      | Plate                  | 11111111-1111-1111-1111-111111111111 |
      | Plate                  | 11111111-1111-1111-1111-111111111113 |
      | Well                   | 11111111-1111-1111-1111-111111111111 |
      | Well                   | 11111111-1111-1111-1111-111111111113 |
      | Project                | 11111111-1111-1111-1111-111111111111 |
      | Project                | 11111111-1111-1111-1111-111111111113 |
      | Request                | 11111111-1111-1111-1111-111111111111 |
      | Request                | 11111111-1111-1111-1111-111111111113 |
      | Sample                 | 11111111-1111-1111-1111-111111111111 |
      | Sample                 | 11111111-1111-1111-1111-111111111113 |
      | StudySample            | 11111111-1111-1111-1111-111111111111 |
      | StudySample            | 11111111-1111-1111-1111-111111111113 |
      | TagInstance            | 11111111-1111-1111-1111-111111111111 |
      | TagInstance            | 11111111-1111-1111-1111-111111111113 |
      | LibraryTube            | 11111111-1111-1111-1111-111111111111 |
      | LibraryTube            | 11111111-1111-1111-1111-111111111113 |
      | MultiplexedLibraryTube | 11111111-1111-1111-1111-111111111111 |
      | MultiplexedLibraryTube | 11111111-1111-1111-1111-111111111113 |
      | SampleTube             | 11111111-1111-1111-1111-111111111111 |
      | SampleTube             | 11111111-1111-1111-1111-111111111113 |
      | Quota                  | 11111111-1111-1111-1111-111111111111 |
      | Quota                  | 11111111-1111-1111-1111-111111111113 |
      | BillingEvent           | 11111111-1111-1111-1111-111111111111 |
      | BillingEvent           | 11111111-1111-1111-1111-111111111113 |
	    | PlatePurpose           | 11111111-1111-1111-1111-111111111111 |
	    | PlatePurpose           | 11111111-1111-1111-1111-111111111112 |
